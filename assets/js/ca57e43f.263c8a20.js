"use strict";(self.webpackChunkokda_networks=self.webpackChunkokda_networks||[]).push([[143],{3433:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var t=o(4848),i=o(8453);const s={sidebar_position:2},r="Start Using IPRoute2-Sysrepo",l={id:"IPRoute2-Sysrepo/basic-config",title:"Start Using IPRoute2-Sysrepo",description:"With IPRoute2-Sysrepo you can configure your linux networking using the following methods:",source:"@site/docs/IPRoute2-Sysrepo/2-basic-config.md",sourceDirName:"IPRoute2-Sysrepo",slug:"/IPRoute2-Sysrepo/basic-config",permalink:"/IPRoute2-Sysrepo/basic-config",draft:!1,unlisted:!1,editUrl:"https://github.com/okda-networks/docs_source/tree/main/docs/IPRoute2-Sysrepo/2-basic-config.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/IPRoute2-Sysrepo/overview"},next:{title:"Supported Features",permalink:"/IPRoute2-Sysrepo/supported-features"}},a={},c=[];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"start-using-iproute2-sysrepo",children:"Start Using IPRoute2-Sysrepo"}),"\n",(0,t.jsx)(n.p,{children:"With IPRoute2-Sysrepo you can configure your linux networking using the following methods:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Netconf: you will need to install ",(0,t.jsx)(n.a,{href:"https://github.com/CESNET/netopeer2",children:"Netopeer2 server"})," and use any netconf client to edit the data of iproute2 yang modules."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/okda-networks/onm-cli",children:"ONM-CLI"}),": it allows you to configure sysrepo loaded yang modules in a user-friendly cli without the need for netconf."]}),"\n",(0,t.jsx)(n.li,{children:"sysrepocfg tool: this is a test tool from sysrepo to edit and view sysrepo data stores configuration."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"IPRoute2-sysrepo needs to be running while using the tools above:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo iproute2-sysrepo\n"})}),"\n",(0,t.jsx)(n.h1,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.p,{children:"Below will be demonstrating creating the following interfaces in one transaction using sysrepocfg tool:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"veth interface with ipv4 and ipv6 addresses."}),"\n",(0,t.jsx)(n.li,{children:"vlan interface with id 10."}),"\n",(0,t.jsx)(n.li,{children:"veth interface mapped to vlan 10."}),"\n",(0,t.jsx)(n.li,{children:"bridge interface."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"1- Start IPRoute2-Sysrepo and keep it running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo iproute2-sysrepo\n"})}),"\n",(0,t.jsx)(n.p,{children:"2- In a new terminal window copy the following xml data into a new .xml file:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"test_links.xml"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<links xmlns="urn:okda:iproute2:ip:link">\n    <link>\n        <name>testIf0</name>\n        <type>veth</type>\n        <master>br1</master>\n        <ip>\n            <address>192.0.2.1/32</address>\n        </ip>\n        <ip>\n            <address>2001:bd8::11/64</address>\n        </ip>\n    </link>\n    <link>\n        <name>testIf1</name>\n        <type>veth</type>\n    </link>\n    <vlan>\n        <name>vlan10</name>\n        <device>testIf1</device>\n        <vlan-info>\n            <protocol>802.1q</protocol>\n            <id>10</id>\n        </vlan-info>\n    </vlan>\n    <bridge>\n        <name>br1</name>\n        <br-info>\n            <ageing_time>1000</ageing_time>\n        </br-info>\n    </bridge>\n</links>\n'})}),"\n",(0,t.jsx)(n.p,{children:"3- use the following command to apply the configuration to sysrepo running data store:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sysrepocfg --edit test_links.xml -d running\n"})}),"\n",(0,t.jsxs)(n.p,{children:["4- Interfaces should be created automaticlly on your linux",(0,t.jsx)(n.br,{}),"\n","You can use legacy iproute2 commands to view config:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ip link show\nip address show\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or get the config from sysrepo operational data store:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'sysrepocfg -X -d operational -f json  -x "/iproute2-ip-link:links"\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>l});var t=o(6540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);
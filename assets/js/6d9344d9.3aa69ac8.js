"use strict";(self.webpackChunkokda_networks=self.webpackChunkokda_networks||[]).push([[876],{6478:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var i=t(4848),o=t(8453);const s={sidebar_position:2},r="Quick Start",a={id:"onm/IPRoute2-Sysrepo/basic-config",title:"Quick Start",description:"When IPRoute2-Sysrepo is initiated, it automatically undertakes the following tasks:",source:"@site/docs/onm/IPRoute2-Sysrepo/2-basic-config.md",sourceDirName:"onm/IPRoute2-Sysrepo",slug:"/onm/IPRoute2-Sysrepo/basic-config",permalink:"/onm/IPRoute2-Sysrepo/basic-config",draft:!1,unlisted:!1,editUrl:"https://github.com/okda-networks/docs_source/tree/main/docs/onm/IPRoute2-Sysrepo/2-basic-config.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/onm/IPRoute2-Sysrepo/overview"},next:{title:"Supported Features",permalink:"/onm/IPRoute2-Sysrepo/supported-features"}},c={},l=[];function d(n){const e={br:"br",code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(e.p,{children:"When IPRoute2-Sysrepo is initiated, it automatically undertakes the following tasks:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Loads the existing Linux networking configuration into the running datastore."}),"\n",(0,i.jsx)(e.li,{children:"Subscribes to any configuration changes within the Sysrepo system."}),"\n"]}),"\n",(0,i.jsx)(e.h1,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(e.p,{children:"Below will be demonstrating creating the following interfaces in one transaction using sysrepocfg tool:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"veth interface with ipv4 and ipv6 addresses."}),"\n",(0,i.jsx)(e.li,{children:"vlan interface with id 10."}),"\n",(0,i.jsx)(e.li,{children:"veth interface mapped to vlan 10."}),"\n",(0,i.jsx)(e.li,{children:"bridge interface."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"1- Start IPRoute2-Sysrepo and keep it running:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"$ sudo iproute2-sysrepo\n"})}),"\n",(0,i.jsx)(e.p,{children:"2- In a new terminal window copy the following xml data into a new .xml file:"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"test_links.xml"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'<links xmlns="urn:okda:iproute2:ip:link">\n    <link>\n        <name>testIf0</name>\n        <type>veth</type>\n        <master>br1</master>\n        <ip>\n            <address>192.0.2.1/32</address>\n        </ip>\n        <ip>\n            <address>2001:bd8::11/64</address>\n        </ip>\n    </link>\n    <link>\n        <name>testIf1</name>\n        <type>veth</type>\n    </link>\n    <vlan>\n        <name>vlan10</name>\n        <device>testIf1</device>\n        <vlan-info>\n            <protocol>802.1q</protocol>\n            <id>10</id>\n        </vlan-info>\n    </vlan>\n    <bridge>\n        <name>br1</name>\n        <br-info>\n            <ageing_time>1000</ageing_time>\n        </br-info>\n    </bridge>\n</links>\n'})}),"\n",(0,i.jsx)(e.p,{children:"3- use the following command to apply the configuration to sysrepo running data store:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"sysrepocfg --edit test_links.xml -d running\n"})}),"\n",(0,i.jsxs)(e.p,{children:["4- Interfaces should be created automaticlly on your linux",(0,i.jsx)(e.br,{}),"\n","You can use legacy iproute2 commands to view config:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"ip link show\nip address show\n"})}),"\n",(0,i.jsx)(e.p,{children:"Or get the config from sysrepo operational data store:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'sysrepocfg -X -d operational -f json  -x "/iproute2-ip-link:links"\n'})})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);
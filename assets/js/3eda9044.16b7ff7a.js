"use strict";(self.webpackChunkokda_networks=self.webpackChunkokda_networks||[]).push([[357],{1046:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>d});var o=i(4848),s=i(8453);const t={sidebar_position:3},c="User Guide",r={id:"ONM-CLI/user-guide",title:"User Guide",description:"This guide provides instructions on using the onm-cli.",source:"@site/docs/ONM-CLI/3-user-guide.md",sourceDirName:"ONM-CLI",slug:"/ONM-CLI/user-guide",permalink:"/ONM-CLI/user-guide",draft:!1,unlisted:!1,editUrl:"https://github.com/okda-networks/docs_source/tree/main/docs/ONM-CLI/3-user-guide.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installation Guide",permalink:"/ONM-CLI/install-guide"}},l={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"generating the commands",id:"generating-the-commands",level:2},{value:"configuring running datastore",id:"configuring-running-datastore",level:2},{value:"Viewing Configuration",id:"viewing-configuration",level:2},{value:"Installing/Uninstalling YANG Modules in Sysrepo",id:"installinguninstalling-yang-modules-in-sysrepo",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"user-guide",children:"User Guide"}),"\n",(0,o.jsx)(e.p,{children:"This guide provides instructions on using the onm-cli."}),"\n",(0,o.jsx)(e.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#generating-the-commands",children:"Generating the Commands"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#configuring-running-datastore",children:"Configuring Running Datastore"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#viewing-configuration",children:"Viewing Configuration"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#installing-uninstalling-yang-modules-in-sysrepo",children:"Installing/Uninstalling YANG Modules in Sysrepo"})}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"generating-the-commands",children:"generating the commands"}),"\n",(0,o.jsx)(e.p,{children:"To begin, you'll need to generate commands from Sysrepo's YANG modules:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc> enable \npc# sysrepo load-modules \n  yang commands generated successfully for module=ietf-yang-schema-mount\n  yang commands generated successfully for module=sysrepo\n  yang commands generated successfully for module=ietf-netconf-acm\n  yang commands generated successfully for module=ietf-yang-library\n  yang commands generated successfully for module=sysrepo-monitoring\n  yang commands generated successfully for module=sysrepo-plugind\n  yang commands generated successfully for module=iproute2-ip-link\n  yang commands generated successfully for module=iproute2-ip-netns\n  yang commands generated successfully for module=iproute2-ip-nexthop\n  yang commands generated successfully for module=iproute2-ip-route\n  yang commands generated successfully for module=iproute2-tc-filter\n  yang commands generated successfully for module=iproute2-tc-qdisc\npc# \n"})}),"\n",(0,o.jsx)(e.h2,{id:"configuring-running-datastore",children:"configuring running datastore"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Once commands are generated, under the config mode, you'll see all generated commands:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc# configure terminal \npc(config)# \n  quit                 quit cli\n  exit                 exit to prev mode\n  commit               commit changes to sysrepo cdb\n  show                 print the candidate/running config\n  discard-changes      discard all current changes\n  no                   delete configs\n  nacm-ietf            configure nacm-ietf (ietf-netconf-acm) [contain]\n  links-iproute2       configure links-iproute2 (iproute2-ip-link) [contain]\n  netnses-iproute2     configure netnses-iproute2 (iproute2-ip-netns) [contain]\n  routes-iproute2      configure routes-iproute2 (iproute2-ip-route) [contain]\n  qdiscs-iproute2      configure qdiscs-iproute2 (iproute2-tc-qdisc) [contain]\n  classes-iproute2     configure classes-iproute2 (iproute2-tc-qdisc) [contain]\npc(config)# \n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"For each YANG module, a new sub-config mode is generated.\nUnder that mode, you can configure the running DS for that module:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc(config)# links-iproute2 \npc(config-links-iproute2)# link eth1\npc(config-link[name='eth1'])# type iproute2-ip-link:dummy \npc(config-link[name='eth1'])# ip 192.168.10.24/24\npc(config-link[name='eth1'])# mtu 1405\npc(config-link[name='eth1'])# show config-candidate links-iproute2 link eth1\nlink eth1 \n  mtu 1405\n  ip 192.168.10.24/24 \n  type iproute2-ip-link:dummy\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To commit changes:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc(config-link[name='eth1'])# commit\nchanges applied successfully!\npc(config-link[name='eth1'])# show config-running links-iproute2 link eth1\nlink eth1 \n  mtu 1405\n  admin-status down\n  group 0\n  advance protodown on\n  advance numtxqueues 1\n  advance numrxqueues 1\n  advance gso_max_size 65536\n  advance gso_ipv4_max_size 65536\n  advance gso_max_segs 65535\n  advance gro_max_size 65536\n  advance gro_ipv4_max_size 65536\n  advance txqueuelen 1000\n  modes arp off\n  modes multicast off\n  modes allmulticast off\n  modes promisc off\n  modes trailers on\n  ip 192.168.10.24/24\n  type iproute2-ip-link:dummy\n"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Note:"})," The default commands will automatically be added to the running configuration."]}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To discard configuration changes in the candidate datastore:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc(config)# discard-changes\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To delete config:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc(config-links-iproute2)# no link eth1\npc(config-links-iproute2)# commit \n changes applied successfully!\npc(config-links-iproute2)# \n"})}),"\n",(0,o.jsx)(e.h2,{id:"viewing-configuration",children:"Viewing Configuration"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To view configuration:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-angular2html",children:"pc(config)# show config-running <module-name> \npc(config)# show config-candidate <module-name> \npc(config)# show config-running <module-name> \n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To check the diff between candidate and running:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc(config)# show config-candidate links-iproute2 diff\nno config diff between candidate and running!\n"})}),"\n",(0,o.jsx)(e.h2,{id:"installinguninstalling-yang-modules-in-sysrepo",children:"Installing/Uninstalling YANG Modules in Sysrepo"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To list all installed YANG modules:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc# sysrepo list-modules \n[+] ietf-yang-metadata\n[+] yang\n[+] ietf-inet-types\n[+] ietf-yang-types\n[+] ietf-yang-schema-mount\n[+] ietf-yang-structure-ext\n[+] ietf-datastores\n[+] sysrepo\n[+] ietf-netconf-acm\n[+] ietf-factory-default\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To install a module:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc# sysrepo install-module \n  <module-file>        module yang file .yang  \n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"To uninstall:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pc# sysrepo remove-module \n  <module-name>        module name ex:ietf-vrrp\n"})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(a,{...n})}):a(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>c,x:()=>r});var o=i(6540);const s={},t=o.createContext(s);function c(n){const e=o.useContext(t);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),o.createElement(t.Provider,{value:e},n.children)}}}]);